<page-header content="vm.header"></page-header>
<div class="">

  <div class="row text-center"> <!-- Sort: LEFT Field select : RIGHT -->

    <div class="text-center" ng-show="!vm.meta || vm.error">
      <h1 class="text-danger" ng-show="vm.error"> {{vm.error}} </h1>
    </div>

    <button class="btn btn-default" ng-click="vm.addQuery()">Add Query Parameter</button>
    <button class="btn btn-default" ng-click="vm.giveMeData()">Excecute Query</button>

    <div class="queryRow" ng-repeat="(key, value) in vm.qArray track by $index">
        <select class="selectParam queryRowStuff" ng-options="k as k for (k, v) in vm.meta" ng-model="vm.qArray[$index]['param']"></select>
        <select class="selectOperator queryRowStuff" ng-options="v.op as v.name for (k, v) in vm.operators" ng-model="vm.qArray[$index]['op']"></select>
        <input class="queryRowStuff" ng-model="vm.qArray[$index]['value']">
        <button class="btn btn-warning queryRowStuff" ng-click="vm.removeMe($index)"><span class="glyphicon glyphicon-remove-sign"></span></button>
    </div>

    <!-- QUERY BUILDER FROM ONLINE -->

    <!-- QUERY BUILDER FROM ONLINE END -->

    <!--OLD FORM IF THERE IS A GOD OF CS PLEASE LET ANGULAR QUERY BUILDER WORK BY WEDNESDAY -->
    <!-- <form>
      <div class="col-xs-6">
        
        <div class="row" id="queryRow" ng-init="vm.initiation(Jurisdiction_Ward);">
          <div class="col-xs-6 col-m-3">
            <label class="queryLabel pull-right" id="wardLabel">Select Ward: </label>
          </div>
          <select type="text" ng-options="ward for ward in vm.meta.Jurisdiction_Ward" ng-model='vm.query.Jurisdiction_Ward.$eq' class="querySelect"></select>
        </div>

        <div class="row" id="queryRow" ng-init="vm.initiation(LastVoted);">
          <div class="col-xs-6 col-m-3">
            <label class="queryLabel pull-right" id="LastVotedLabel">Last Voted: </label>
          </div>
          <select type="text" ng-options="lv for lv in vm.meta.LastVoted" ng-model='vm.query.LastVoted.$eq' class="querySelect"></select>
        </div>

        <div class="row" id="queryRow" ng-init="vm.initiation(Registration_VoterStatus);">
          <div class="col-xs-6 col-m-3">
            <label class="queryLabel pull-right" id="Registration_VoterStatusLabel">Voter Status: </label>
          </div>
          <select type="text" ng-options="lv for lv in vm.meta.Registration_VoterStatus" ng-model='vm.query.Registration_VoterStatus.$eq' class="querySelect"></select>
        </div>

        <div class="row" id="queryRow" ng-init="vm.initiation(Personal_Race);">
          <div class="col-xs-6 col-m-3">
            <label class="queryLabel pull-right" id="Registration_VoterStatusLabel">Voter Race: </label>
          </div>
          <select type="text" ng-options="lv for lv in vm.meta.Personal_Race" ng-model='vm.query.Personal_Race.$eq' class="querySelect"></select>
        </div>

        <div class="row" id="queryRow" ng-init="vm.initiation(Personal_Sex);">
          <div class="col-xs-6 col-m-3">
            <label class="queryLabel pull-right" id="Registration_VoterStatusLabel">Voter Sex: </label>
          </div>
          <select type="text" ng-options="lv for lv in vm.meta.Personal_Sex" ng-model='vm.query.Personal_Sex.$eq' class="querySelect"></select>
        </div>
      </div>
      <div class="col-xs-6">
        <div class="row" id="queryRow" ng-init="vm.initiation(Residence_ZipCode5);">
          <div class="col-xs-6 col-m-3">
            <label class="queryLabel pull-right" id="districtLabel">Enter Zip:</label>
          </div>
          <input type="text" ng-model="vm.query.Residence_ZipCode5.$eq" typeahead="zip for zip in vm.meta.Residence_ZipCode5" typeahead-editable="false">
        </div>

        <div class="row" id="queryRow" ng-init="vm.initiation(Personal_FirstName);">
          <div class="col-xs-6 col-m-3">
            <label class="queryLabel pull-right" id="districtLabel">Enter First Name:</label>
          </div>
          <input type="text" ng-model="vm.query.Personal_FirstName.$regex">
        </div>

        <div class="row" id="queryRow" ng-init="vm.initiation(Personal_LastName);">
          <div class="col-xs-6 col-m-3">
            <label class="queryLabel pull-right" id="districtLabel">Enter Last Name:</label>
          </div>
          <input type="text" ng-model="vm.query.Personal_LastName.$regex">
        </div>

        <div class="row text-center">
          <button class="btn btn-default testBtn" ng-click="vm.giveMeData()">Excecute Query</button>
        </div>
      </div>
    <hr>
    </form> -->

      

    
    <div class="row" ng-show="vm.data">
      <div class="col-md-12">
        <nav><ul class="pager">
          <li><button class="btn btn-primary" ng-click="vm.prev()">Previous</button></li>
          <li><p class="strong"><strong> Page : {{ vm.page }} of {{vm.pages}} </strong> ({{vm.ngRepStart}} - {{vm.ngRepEnd}} of {{vm.count}})</p></li>
          <li><button class="btn btn-primary" ng-click="vm.next()">Next</button></li>
        </ul></nav>
      </div>
    </div>

  </div>
  <hr>

  <div class="tableContainer infScroll">
    <!-- Loading overlay -->

    <table id="voterTable" class="">

      <thead>
        <tr>
          <th class="voterDataTh" ng-repeat="(key, header) in vm.fields">{{ header }}</th>
        </tr>
      </thead>

      <tbody>
        <h1 class="text-success" ng-show="!vm.meta">Loading...</h1>
        <tr ng-repeat="voter in vm.displayData">
          <td class="" ng-repeat="(key, head) in vm.fields">{{ voter[key] }}</td>
        </tr>
      </tbody>

    </table>
    
  </div>
</div>